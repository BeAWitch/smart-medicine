<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="zxx" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>智慧医药系统</title>

    <link rel="shortcut icon" type="image/x-icon" href="assets/images/cropped-favicon-32x32.png"/>
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>

    <link href="assets/css/style.css" rel="stylesheet" type="text/css"/>

    <link href="assets/css/plugin.css" rel="stylesheet" type="text/css"/>

    <link href="assets/css/dashboard.css" rel="stylesheet" type="text/css"/>

    <link href="assets/fonts/flaticon.css" rel="stylesheet" type="text/css"/>

    <link href="assets/css/icons.css" rel="stylesheet" type="text/css"/>

    <link rel="stylesheet" href="assets/fonts/line-icons.css" type="text/css"/>
    <link rel="stylesheet" href="common/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/goat/index.css">
    <link rel="stylesheet" href="assets/css/goat/all.css">
</head>
<body class="home-3">

<div id="preloader">
    <div id="status"></div>
</div>

<div th:replace="common/common-bar::#header"></div>

<section class="banner">
    <div class="container">
        <div class="banner-content" style="height: 100vh">
            <div class="row flex-row-reverse">
                <div class="col-lg-6 col-md-12 col-sm-12">
                    <div class="banner-image-3">
                        <canvas id="qwq"></canvas>
                        <!--                        <img src="assets/images/banner/NTH_M71_07_07-2048x1191.png" alt=""/>-->
                    </div>
                </div>
                <div class="col-lg-6 col-md-12 col-sm-12">
                    <div class="banner-ct-wrap">
                        <div class="banner-head">
                            <h4 class="cl-green">智慧医药</h4>
                            <h1>最好的医疗咨询和自我诊断健康中心</h1>
                        </div>
                        <div class="banner-detail pb-2">
                            <p>The best healthcare and self diagnostic health center</p>
                        </div>
                        <a href="login" class="btn">登录/注册</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="shell-main-header">
            <div class="shell-main-header-left">
                <div class="shell-main-header-left-top">
                    <h2>它</h2>
                    <span>是智能的</span>
                </div>
                <div class="shell-main-header-left-bottom">
                     <span style="color: rgb(100, 100, 100);">
                                智慧医药系统，为您提供疾病查询等帮助
                     </span>
                    <br/><br/>
                    <span style="font-family: font;">
                        Smart medicine system, to provide you with disease inquiries and other help
                    </span>
                </div>
                <div class="shell-main-header-left-footer">
                    <p>-------1up</p>
                </div>
            </div>
            <div class="shell-main-header-right">
                <img src="/assets/images/home/medical-team-workers-examining-a-medical-report-KQ5AY7L.jpg"
                     style="width: 100%;height: 100%">
            </div>
        </div>

        <div class="shell-main-bottom" style="height: 100vh">
            <h2><span>功</span>能列表:</h2>
            <div class="shell-main-bottom-bottom">
                <ul>
                    <li>
                        <img src="/assets/images/home/home_doctor.png" alt="">
                        <h2>智能医生:</h2>
                        <span>提供病症，我们将在最短的时间为您分析病因</span>
                    </li>
                    <li>
                        <img src="/assets/images/home/home_medicine.png" alt="">
                        <h2>药品查询:</h2>
                        <span>说出你想了解的药物，我们将会根据您的需求详细的列出药品注意事项</span>
                    </li>
                    <li>
                        <img src="/assets/images/home/home_ocr.png" alt="">
                        <h2>文字识别:</h2>
                        <span>给出说明书和中草药，我们将会在第一时间提取说明书的注意事项和药物的品类</span>
                    </li>
                    <li>
                        <img src="/assets/images/home/home_group.png" alt="">
                        <h2>病友交流:</h2>
                        <span>提供了一份交流平台，同病相怜的人们可以在这里畅所欲言</span>
                    </li>
                </ul>
            </div>
        </div>

        <div class="shell-main-bottom" style="height: 100vh">
            <h2><span>数</span>据可视:</h2>
            <div class="shell-main-bottom-bottom" style="display: flex;justify-content: space-evenly">
                <div style="width: 50%;height: 250px" id="pie_year">

                </div>
                <div style="width: 50%;height: 250px" id="pie_medicine">

                </div>
            </div>
        </div>

    </div>
    <div class="svg-image svg-img-rotate position-absolute start-0 bottom-0 w-100">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" preserveAspectRatio="none">
            <path class="elementor-shape-fill" opacity="0.33"
                  d="M473,67.3c-203.9,88.3-263.1-34-320.3,0C66,119.1,0,59.7,0,59.7V0h1000v59.7 c0,0-62.1,26.1-94.9,29.3c-32.8,3.3-62.8-12.3-75.8-22.1C806,49.6,745.3,8.7,694.9,4.7S492.4,59,473,67.3z"></path>
            <path class="elementor-shape-fill" opacity="0.66"
                  d="M734,67.3c-45.5,0-77.2-23.2-129.1-39.1c-28.6-8.7-150.3-10.1-254,39.1 s-91.7-34.4-149.2,0C115.7,118.3,0,39.8,0,39.8V0h1000v36.5c0,0-28.2-18.5-92.1-18.5C810.2,18.1,775.7,67.3,734,67.3z"></path>
            <path class="elementor-shape-fill"
                  d="M766.1,28.9c-200-57.5-266,65.5-395.1,19.5C242,1.8,242,5.4,184.8,20.6C128,35.8,132.3,44.9,89.9,52.5C28.6,63.7,0,0,0,0 h1000c0,0-9.9,40.9-83.6,48.1S829.6,47,766.1,28.9z"></path>
        </svg>
    </div>
</section>

<style>
    .function_list {
        /*border: 1px solid black;*/
        display: flex;
        justify-content: space-around;
    }

    .function_card {
        width: 25%;
        background: #fff;
        box-shadow: 0 0 15px #cccccc57;
    }

    .function_card:hover {
        background: #fff1b8;
    }


    .function_card > h3 {
        text-align: center;
    }

</style>


<div th:replace="common/common-bar::#back"></div>

<div th:replace="common/common-bar::#footer"></div>

<div th:replace="common/common-bar::#search"></div>

<div th:replace="common/common-bar::#back-to-top"></div>

<script src="assets/js/jquery-3.5.1.min.js"></script>
<script>
    window.addEventListener('scroll', function () {
        let top = window.scrollY
        if (top != 0) {
            $('.shell-top').css('top', '-100vh')
            $('.shell-main').css('top', '0')
            $('.shell-main-lbt-word').css('transform', 'translateY(0px)')
            $('.shell-main-lbt-word').css('backdrop-filter', 'blur(5px)')
            $('.shell-main-lbt-word h2').css('transform', 'translate(0px)')
            $('.shell-main-lbt-word span').css('transform', 'translate(0px)')

        } else {
            $('.shell-top').css('top', '0px')
            $('.shell-main').css('top', '100vh')
            $('.shell-main-lbt-word').css('transform', 'translateY(400px)')
            $('.shell-main-lbt-word').css('backdrop-filter', 'blur(0px)')
            $('.shell-main-lbt-word h2').css('transform', 'translate(520px)')
            $('.shell-main-lbt-word span').css('transform', 'translate(-620px)')
        }
        if (top > 280) {
            $('.shell-main-header-left-top').css('opacity', '1')
            $('.shell-main-header-left-top').css('transform', 'translateY(0px)')
            $('.shell-main-header-left-bottom').css('opacity', '1')
            $('.shell-main-header-left-bottom').css('transform', 'translateY(0px)')
            $('.shell-main-header-left-footer').css('opacity', '1')
            $('.shell-main-header-left-footer').css('transform', 'translateY(0px)')
        } else {
            $('.shell-main-header-left-top').css('opacity', '0')
            $('.shell-main-header-left-top').css('transform', 'translateY(400px)')
            $('.shell-main-header-left-bottom').css('opacity', '0')
            $('.shell-main-header-left-bottom').css('transform', 'translateY(400px)')
            $('.shell-main-header-left-footer').css('opacity', '0')
            $('.shell-main-header-left-footer').css('transform', 'translateY(400px)')
        }
    })
    let left = document.querySelector(".button-left")
    let right = document.querySelector(".button-right")
    let min = document.querySelectorAll(".min")
    let images = document.querySelector(".images")
    let index = 0
    let time

    function position() {
        images.style.left = (index * -100) + "%"
    }

    function add() {
        if (index >= min.length - 1) {
            index = 0
        } else {
            index++
        }
    }

    function desc() {
        if (index < 1) {
            index = min.length - 1
        } else {
            index--
        }
    }

    function timer() {
        time = setInterval(() => {
            index++
            desc()
            add()
            position()
        }, 34000)
    }

    left.addEventListener("click", () => {
        desc()
        position()
        clearInterval(time)
        timer()
    })
    // 右边的按钮和左边也是差不多
    right.addEventListener("click", () => {
        add()
        position()
        clearInterval(time)
        timer()
    })

    for (let i = 0; i < min.length; i++) {
        min[i].addEventListener("click", () => {
            index = i
            position()
            clearInterval(time)
            timer()
        })
    }

    timer()
</script>

<!--<script src="https://cdn.staticfile.org/echarts/4.3.0/echarts.min.js"></script>-->
<script src="common/echarts-4.3.0.min.js"></script>
<script>
    fetch("user/statis", {
        method: "POST"
    }).then(result => result.json()).then(v => {
        console.log('qqw')
        let data = v.data
        let {sex, medicine} = data
        /*      "l18": 0.0,
      "l30": 2.0,
      "l48": 0.0,
      "l65": 0.0,
      "l80": 0.0,
      "l95": 0.0,
      "m95": 0.0*/
        let myChart1 = echarts.init(document.getElementById('pie_year'));
        const mapper = {
            l18: '18岁以内',
            l30: '18到30岁',
            l48: '30到48岁',
            l65: '48到65岁',
            l80: '65到80岁',
            l95: '80到95岁',
            m95: '95岁以上'
        }
        myChart1.setOption(
            {
                title: {
                    text: '注册用户年龄段',
                    x: 'center',
                    y: 'bottom'
                },
                series: {
                    type: 'pie',
                    label: {
                        normal: {
                            formatter: (params) => {
                                const {name,value,percent} = params
                            //     {
                            //     "componentType": "series",
                            //         "componentSubType": "pie",
                            //         "componentIndex": 0,
                            //         "seriesType": "pie",
                            //         "seriesIndex": 0,
                            //         "seriesId": "\u0000series\u00000\u00000",
                            //         "seriesName": "series\u00000",
                            //         "name": "18到30岁",
                            //         "dataIndex": 1,
                            //         "data": {
                            //         "name": "18到30岁",
                            //             "value": "53.94"
                            //     },
                            //     "value": "53.94",
                            //         "color": "#2f4554",
                            //         "dimensionNames": [
                            //         "value"
                            //     ],
                            //         "encode": {
                            //         "value": [
                            //             0
                            //         ]
                            //     },
                            //     "marker": "<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#2f4554;\"></span>",
                            //         "$vars": [
                            //         "seriesName",
                            //         "name",
                            //         "value",
                            //         "percent"
                            //     ],
                            //         "percent": 10.62,
                            //         "status": "normal"
                            // }

                            console.log(JSON.stringify(params))
                                return `${name}: ${value}\n${percent}%`
                            },
                            textStyle: {
                                fontWeight: 'normal',
                                fontSize: 15
                            }
                        },
                    },
                    stillShowZeroSum: false,
                    data: Object.keys(sex).map(key => {
                        return {
                            //TODO 假数据
                            name: mapper[key],
                            value: Math.floor(Math.random() * 100),
                        }
                    })
                }
            }
        )

        let myChart2 = echarts.init(document.getElementById('pie_medicine'));
        const mapper2 = {
            a: '西药',
            b: '中药',
            c: '中成药'
        }
        myChart2.setOption(
            {
                title: {
                    text: '收录药品类型',
                    x: 'center',
                    y: 'bottom'
                },
                series: {
                    type: 'pie',
                    label: {
                        normal: {
                            formatter: '{b}:{c}: ({d}%)',
                            textStyle: {
                                fontWeight: 'normal',
                                fontSize: 15
                            }
                        }
                    },
                    stillShowZeroSum: false,
                    data: Object.keys(medicine).map(key => {
                        return {
                            name: mapper2[key],
                            value: medicine[key],
                        }
                    })
                }
            }
        )
    })
</script>

<!-- 引入样式 -->
<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
<!-- 引入组件库 -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="assets/js/bootstrap.min.js"></script>
<script src="assets/js/plugin.js"></script>
<script src="assets/js/main.js"></script>
<script src="assets/js/custom-swiper.js"></script>
<script src="assets/js/custom-nav.js"></script>
<script src="common/utils/reg.js"></script>
<script src="common/layer/layer.js"></script>
<script src="common/custom.js"></script>
<script src=" https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="common/FBXLoader.js"></script>
<script src="common/inflate.min.js"></script>
<script>
    // Set up scene
    var scene = new THREE.Scene();

    // Set up camera
    var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 1000);
    camera.position.z = 5.5;

    // Set up renderer
    var renderer = new THREE.WebGLRenderer({
        canvas: document.getElementById('qwq'),
        antialias: true,
        alpha: true
    });
    renderer.setSize(500, 500);
    renderer.shadowMap.enabled = true;

    // // Add light
    // var light = new THREE.DirectionalLight(0xffffff, 1);
    // light.position.set(10, 10, 10);
    // light.castShadow = true;
    // scene.add(light);

    // 添加一个平行光光源
    var directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
    directionalLight.position.set(10, 10, 10); // 设置光源位置
    scene.add(directionalLight);
    var directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
    directionalLight.position.set(10, -10, 10); // 设置光源位置
    scene.add(directionalLight);

    var directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
    directionalLight.position.set(-10, -10, 10); // 设置光源位置
    scene.add(directionalLight);

    // Load model
    var loader = new THREE.FBXLoader();
    loader.load('assets/a.fbx', function (object) {
        scene.add(object);
    });

    var rotationSpeed = 0.01; // 设置旋转速度

    // 在渲染循环中更新模型的旋转
    function animate() {
        requestAnimationFrame(animate);

        // 更新模型的旋转角度
        scene.traverse(function (object) {
            if (object.isMesh) {
                object.rotation.y += rotationSpeed; // 在y轴上旋转
            }
        });

        renderer.render(scene, camera);
    }

    animate();
</script>
</body>
</html>
